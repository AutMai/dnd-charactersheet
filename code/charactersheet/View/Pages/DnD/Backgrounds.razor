@page "/backgrounds"
@using Model.Entities
@using Domain.Repositories.Interfaces
@inject IRepository<Background> _backgroundRepository;
@inject NavigationManager _navigationManager;

<h3>Backgrounds</h3>

<DataInitializer Data="BackgroundList">
    <ChildComponent Context="backgrounds">
        <div class="row w-50 m-auto">
            @foreach (var b in backgrounds) {
                <RadzenCard class="col-md-4 m-2" style="cursor: pointer;" @onclick="@(_ => _navigationManager.NavigateTo($"/backgrounds/{b.Name}"))">
                    <h3 class="m-0">@b.Name</h3><hr/>
                    <div>
                        <b>Skill Proficiencies:</b><br/>@b.SkillProficiencies
                    </div>
                </RadzenCard>
            }
        </div>
    </ChildComponent>
</DataInitializer>

@code {
    private List<Background>? BackgroundList { get; set; }

    protected override async Task OnInitializedAsync() {
        BackgroundList = await _backgroundRepository.ReadAsync();
    }

}